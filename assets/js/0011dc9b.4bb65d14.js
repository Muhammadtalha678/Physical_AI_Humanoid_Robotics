"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[7639],{7328:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"week-3-5/ros2-packages-python","title":"Building ROS 2 Packages with Python","description":"This section covers how to create, structure, and build ROS 2 packages using Python. Python is one of the most popular languages for ROS 2 development due to its ease of use and rapid prototyping capabilities.","source":"@site/docs/week-3-5/ros2-packages-python.md","sourceDirName":"week-3-5","slug":"/week-3-5/ros2-packages-python","permalink":"/Physical-AI-Humanoid-Robotics/docs/week-3-5/ros2-packages-python","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/week-3-5/ros2-packages-python.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Building ROS 2 Packages with Python"},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Nodes, Topics, Services, and Actions","permalink":"/Physical-AI-Humanoid-Robotics/docs/week-3-5/ros2-nodes-topics"},"next":{"title":"Launch Files and Parameter Management","permalink":"/Physical-AI-Humanoid-Robotics/docs/week-3-5/ros2-launch-files"}}');var a=i(4848),t=i(8453);const o={sidebar_position:3,title:"Building ROS 2 Packages with Python"},c="Building ROS 2 Packages with Python",l={},r=[{value:"ROS 2 Package Structure",id:"ros-2-package-structure",level:2},{value:"Basic Package Layout",id:"basic-package-layout",level:3},{value:"Package.xml File",id:"packagexml-file",level:3},{value:"Setting Up Python Packages",id:"setting-up-python-packages",level:2},{value:"setup.py Configuration",id:"setuppy-configuration",level:3},{value:"setup.cfg Configuration",id:"setupcfg-configuration",level:3},{value:"Creating Python Nodes",id:"creating-python-nodes",level:2},{value:"Basic Node Structure",id:"basic-node-structure",level:3},{value:"Publisher Implementation",id:"publisher-implementation",level:3},{value:"Subscriber Implementation",id:"subscriber-implementation",level:3},{value:"Service Implementation",id:"service-implementation",level:3},{value:"Action Implementation",id:"action-implementation",level:3},{value:"Building and Running Python Packages",id:"building-and-running-python-packages",level:2},{value:"Creating a Package",id:"creating-a-package",level:3},{value:"Building the Package",id:"building-the-package",level:3},{value:"Running Nodes",id:"running-nodes",level:3},{value:"Launch Files for Python Packages",id:"launch-files-for-python-packages",level:2},{value:"Python Launch Files",id:"python-launch-files",level:3},{value:"Testing Python Packages",id:"testing-python-packages",level:2},{value:"Unit Testing",id:"unit-testing",level:3},{value:"Launch Testing",id:"launch-testing",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Code Organization",id:"code-organization",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Performance Considerations",id:"performance-considerations",level:3},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Related Content",id:"related-content",level:2},{value:"Code Examples",id:"code-examples",level:2},{value:"Exercises",id:"exercises",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"building-ros-2-packages-with-python",children:"Building ROS 2 Packages with Python"})}),"\n",(0,a.jsx)(n.p,{children:"This section covers how to create, structure, and build ROS 2 packages using Python. Python is one of the most popular languages for ROS 2 development due to its ease of use and rapid prototyping capabilities."}),"\n",(0,a.jsx)(n.h2,{id:"ros-2-package-structure",children:"ROS 2 Package Structure"}),"\n",(0,a.jsx)(n.h3,{id:"basic-package-layout",children:"Basic Package Layout"}),"\n",(0,a.jsx)(n.p,{children:"A typical ROS 2 Python package follows this structure:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"my_robot_package/\n\u251c\u2500\u2500 CMakeLists.txt          # Build configuration for C++ components\n\u251c\u2500\u2500 package.xml             # Package metadata\n\u251c\u2500\u2500 setup.cfg               # Python installation configuration\n\u251c\u2500\u2500 setup.py                # Python package setup script\n\u251c\u2500\u2500 resource/               # Resource files\n\u251c\u2500\u2500 launch/                 # Launch files\n\u251c\u2500\u2500 config/                 # Configuration files\n\u251c\u2500\u2500 test/                   # Test files\n\u251c\u2500\u2500 my_robot_package/       # Python package directory\n\u2502   \u251c\u2500\u2500 __init__.py         # Python package initialization\n\u2502   \u251c\u2500\u2500 my_node.py          # Python node implementation\n\u2502   \u2514\u2500\u2500 my_module.py        # Additional Python modules\n\u2514\u2500\u2500 README.md               # Documentation\n"})}),"\n",(0,a.jsx)(n.h3,{id:"packagexml-file",children:"Package.xml File"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"package.xml"})," file contains metadata about the package:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Package name, version, and description"}),"\n",(0,a.jsx)(n.li,{children:"Maintainer information"}),"\n",(0,a.jsx)(n.li,{children:"License information"}),"\n",(0,a.jsx)(n.li,{children:"Dependencies and build tools"}),"\n",(0,a.jsx)(n.li,{children:"Exported interfaces"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Example package.xml:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>my_robot_package</name>\n  <version>0.0.0</version>\n  <description>Example ROS 2 Python package</description>\n  <maintainer email="user@example.com">User Name</maintainer>\n  <license>Apache License 2.0</license>\n\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n  <depend>geometry_msgs</depend>\n\n  <exec_depend>rclpy</exec_depend>\n  <exec_depend>std_msgs</exec_depend>\n\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,a.jsx)(n.h2,{id:"setting-up-python-packages",children:"Setting Up Python Packages"}),"\n",(0,a.jsx)(n.h3,{id:"setuppy-configuration",children:"setup.py Configuration"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"setup.py"})," file defines how the Python package is installed:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\nfrom glob import glob\nimport os\n\npackage_name = 'my_robot_package'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        # Include all launch files\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.py')),\n        # Include all config files\n        (os.path.join('share', package_name, 'config'), glob('config/*.yaml')),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='your.email@example.com',\n    description='Example ROS 2 Python package',\n    license='Apache License 2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'my_node = my_robot_package.my_node:main',\n        ],\n    },\n)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"setupcfg-configuration",children:"setup.cfg Configuration"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"setup.cfg"})," file contains installation configuration:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"[develop]\nscript-dir=$base/lib/my_robot_package\n\n[install]\ninstall-scripts=$base/lib/my_robot_package\n"})}),"\n",(0,a.jsx)(n.h2,{id:"creating-python-nodes",children:"Creating Python Nodes"}),"\n",(0,a.jsx)(n.h3,{id:"basic-node-structure",children:"Basic Node Structure"}),"\n",(0,a.jsx)(n.p,{children:"A basic ROS 2 Python node follows this pattern:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MyNode(Node):\n    def __init__(self):\n        super().__init__('my_node')\n        self.publisher = self.create_publisher(String, 'topic', 10)\n        self.timer = self.create_timer(0.5, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Hello World: {self.i}'\n        self.publisher.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    my_node = MyNode()\n    rclpy.spin(my_node)\n    my_node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,a.jsx)(n.h3,{id:"publisher-implementation",children:"Publisher Implementation"}),"\n",(0,a.jsx)(n.p,{children:"Creating publishers in Python:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# Create publisher with QoS profile\nself.publisher = self.create_publisher(\n    msg_type=String,\n    topic='topic_name',\n    qos_profile=10  # or use QoSProfile object\n)\n\n# Publish messages\nmsg = String()\nmsg.data = 'message content'\nself.publisher.publish(msg)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"subscriber-implementation",children:"Subscriber Implementation"}),"\n",(0,a.jsx)(n.p,{children:"Creating subscribers in Python:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# Create subscriber with callback\nself.subscriber = self.create_subscription(\n    msg_type=String,\n    topic='topic_name',\n    callback=self.subscription_callback,\n    qos_profile=10\n)\n\ndef subscription_callback(self, msg):\n    self.get_logger().info(f'Received: {msg.data}')\n"})}),"\n",(0,a.jsx)(n.h3,{id:"service-implementation",children:"Service Implementation"}),"\n",(0,a.jsx)(n.p,{children:"Creating services in Python:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from example_interfaces.srv import AddTwoInts\n\ndef __init__(self):\n    super().__init__('service_server')\n    self.srv = self.create_service(\n        AddTwoInts,\n        'add_two_ints',\n        self.add_two_ints_callback\n    )\n\ndef add_two_ints_callback(self, request, response):\n    response.sum = request.a + request.b\n    self.get_logger().info(f'Returning {response.sum}')\n    return response\n"})}),"\n",(0,a.jsx)(n.h3,{id:"action-implementation",children:"Action Implementation"}),"\n",(0,a.jsx)(n.p,{children:"Creating actions in Python:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from rclpy.action import ActionServer\nfrom example_interfaces.action import Fibonacci\n\nclass FibonacciActionServer(Node):\n    def __init__(self):\n        super().__init__('fibonacci_action_server')\n        self._action_server = ActionServer(\n            self,\n            Fibonacci,\n            'fibonacci',\n            self.execute_callback\n        )\n\n    def execute_callback(self, goal_handle):\n        self.get_logger().info('Executing goal...')\n        feedback_msg = Fibonacci.Feedback()\n        feedback_msg.sequence = [0, 1]\n\n        for i in range(1, goal_handle.request.order):\n            if goal_handle.is_cancel_requested:\n                goal_handle.canceled()\n                self.get_logger().info('Goal canceled')\n                return Fibonacci.Result()\n\n            feedback_msg.sequence.append(\n                feedback_msg.sequence[i] + feedback_msg.sequence[i-1])\n\n            goal_handle.publish_feedback(feedback_msg)\n\n        goal_handle.succeed()\n        result = Fibonacci.Result()\n        result.sequence = feedback_msg.sequence\n        return result\n"})}),"\n",(0,a.jsx)(n.h2,{id:"building-and-running-python-packages",children:"Building and Running Python Packages"}),"\n",(0,a.jsx)(n.h3,{id:"creating-a-package",children:"Creating a Package"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_python my_robot_package\n"})}),"\n",(0,a.jsx)(n.h3,{id:"building-the-package",children:"Building the Package"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select my_robot_package\nsource install/setup.bash\n"})}),"\n",(0,a.jsx)(n.h3,{id:"running-nodes",children:"Running Nodes"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Run node directly\nros2 run my_robot_package my_node\n\n# Run with parameters\nros2 run my_robot_package my_node --ros-args --param my_param:=value\n"})}),"\n",(0,a.jsx)(n.h2,{id:"launch-files-for-python-packages",children:"Launch Files for Python Packages"}),"\n",(0,a.jsx)(n.h3,{id:"python-launch-files",children:"Python Launch Files"}),"\n",(0,a.jsx)(n.p,{children:"ROS 2 supports launch files written in Python:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='my_robot_package',\n            executable='my_node',\n            name='my_node',\n            parameters=[\n                {'param1': 'value1'},\n                {'param2': 42}\n            ],\n            remappings=[\n                ('original_topic', 'new_topic')\n            ]\n        )\n    ])\n"})}),"\n",(0,a.jsx)(n.h2,{id:"testing-python-packages",children:"Testing Python Packages"}),"\n",(0,a.jsx)(n.h3,{id:"unit-testing",children:"Unit Testing"}),"\n",(0,a.jsx)(n.p,{children:"Python packages can be tested using pytest:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"import pytest\nimport rclpy\nfrom my_robot_package.my_node import MyNode\n\ndef test_node_creation():\n    rclpy.init()\n    try:\n        node = MyNode()\n        assert node is not None\n    finally:\n        rclpy.shutdown()\n"})}),"\n",(0,a.jsx)(n.h3,{id:"launch-testing",children:"Launch Testing"}),"\n",(0,a.jsx)(n.p,{children:"Testing launch files and integration:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"import launch\nfrom launch_ros.actions import Node\nimport launch_testing.actions\n\ndef generate_test_description():\n    node = Node(\n        package='my_robot_package',\n        executable='my_node',\n        name='test_node'\n    )\n\n    return launch.LaunchDescription([\n        node,\n        launch_testing.actions.ReadyToTest()\n    ])\n"})}),"\n",(0,a.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsx)(n.h3,{id:"code-organization",children:"Code Organization"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Use proper Python packaging with ",(0,a.jsx)(n.code,{children:"__init__.py"})," files"]}),"\n",(0,a.jsx)(n.li,{children:"Separate concerns into different modules"}),"\n",(0,a.jsx)(n.li,{children:"Follow PEP 8 style guidelines"}),"\n",(0,a.jsx)(n.li,{children:"Use meaningful names for variables and functions"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Use try-catch blocks where appropriate"}),"\n",(0,a.jsx)(n.li,{children:"Log errors with appropriate severity levels"}),"\n",(0,a.jsx)(n.li,{children:"Handle ROS-specific exceptions"}),"\n",(0,a.jsx)(n.li,{children:"Gracefully handle shutdown scenarios"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Minimize message copying in callbacks"}),"\n",(0,a.jsx)(n.li,{children:"Use appropriate QoS settings"}),"\n",(0,a.jsx)(n.li,{children:"Consider threading for CPU-intensive operations"}),"\n",(0,a.jsx)(n.li,{children:"Profile code to identify bottlenecks"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,a.jsx)(n.p,{children:"After completing this section, you should be able to:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Create and structure ROS 2 packages using Python"}),"\n",(0,a.jsx)(n.li,{children:"Implement nodes with publishers, subscribers, services, and actions"}),"\n",(0,a.jsx)(n.li,{children:"Configure package metadata and installation scripts"}),"\n",(0,a.jsx)(n.li,{children:"Build and run Python-based ROS 2 packages"}),"\n",(0,a.jsx)(n.li,{children:"Write launch files for Python nodes"}),"\n",(0,a.jsx)(n.li,{children:"Test Python-based ROS 2 packages"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"related-content",children:"Related Content"}),"\n",(0,a.jsx)(n.p,{children:"For deeper understanding of related concepts, see:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/Physical-AI-Humanoid-Robotics/docs/week-1-2/introduction-to-physical-ai",children:"Introduction to Physical AI"})," - For foundational concepts"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/Physical-AI-Humanoid-Robotics/docs/week-3-5/ros2-architecture",children:"ROS 2 Architecture and Core Concepts"})," - For understanding ROS 2 fundamentals"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/Physical-AI-Humanoid-Robotics/docs/week-3-5/ros2-nodes-topics",children:"Nodes, topics, services, and actions"})," - For detailed communication patterns"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/Physical-AI-Humanoid-Robotics/docs/week-3-5/ros2-launch-files",children:"Launch files and parameter management"})," - For advanced launch configuration"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/Physical-AI-Humanoid-Robotics/docs/week-6-7/gazebo-setup",children:"Gazebo simulation environment setup"})," - For simulation integration"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/Physical-AI-Humanoid-Robotics/docs/week-8-10/isaac-sdk-sim",children:"NVIDIA Isaac SDK and Isaac Sim"})," - For advanced ROS 2 integration"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/Physical-AI-Humanoid-Robotics/docs/week-11-12/humanoid-kinematics-dynamics",children:"Humanoid robot kinematics and dynamics"})," - For robotics applications"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"code-examples",children:"Code Examples"}),"\n",(0,a.jsx)(n.p,{children:"Refer to the following code examples in the textbook repository:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"docs/static/code-examples/ros2-examples/simple_publisher.py"})," - Basic publisher node example"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"docs/static/code-examples/ros2-examples/simple_subscriber.py"})," - Basic subscriber node example"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Create a ROS 2 package with a Python node that publishes sensor data"}),"\n",(0,a.jsx)(n.li,{children:"Implement a service server in Python that processes incoming requests"}),"\n",(0,a.jsx)(n.li,{children:"Create a launch file that starts multiple Python nodes with parameters"}),"\n",(0,a.jsx)(n.li,{children:"Write unit tests for your Python ROS 2 nodes"}),"\n",(0,a.jsx)(n.li,{children:"Run and experiment with the provided ROS 2 examples to understand basic concepts"}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>c});var s=i(6540);const a={},t=s.createContext(a);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);